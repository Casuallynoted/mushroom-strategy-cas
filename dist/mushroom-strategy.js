(()=>{var t,e,i={84:(t,e,i)=>{"use strict";i.d(e,{W:()=>o});const s={home:{order:1,hidden:!1},light:{order:2,hidden:!1},fan:{order:3,hidden:!1},cover:{order:4,hidden:!1},switch:{order:5,hidden:!1},climate:{order:6,hidden:!1},camera:{order:7,hidden:!1}},a={aliases:[],area_id:null,name:"Undisclosed",picture:null,hidden:!1},r={default:{title:"Miscellaneous",showControls:!1,hidden:!1},light:{title:"Lights",showControls:!0,iconOn:"mdi:lightbulb",iconOff:"mdi:lightbulb-off",onService:"light.turn_on",offService:"light.turn_off",hidden:!1},fan:{title:"Fans",showControls:!0,iconOn:"mdi:fan",iconOff:"mdi:fan-off",onService:"fan.turn_on",offService:"fan.turn_off",hidden:!1},cover:{title:"Covers",showControls:!0,iconOn:"mdi:arrow-up",iconOff:"mdi:arrow-down",onService:"cover.open_cover",offService:"cover.close_cover",hidden:!1},switch:{title:"Switches",showControls:!0,iconOn:"mdi:power-plug",iconOff:"mdi:power-plug-off",onService:"switch.turn_on",offService:"switch.turn_off",hidden:!1},camera:{title:"Cameras",showControls:!1,hidden:!1},lock:{title:"Locks",showControls:!1,hidden:!1},climate:{title:"Climates",showControls:!1,hidden:!1},media_player:{title:"Media Players",showControls:!1,hidden:!1},sensor:{title:"Sensors",showControls:!1,hidden:!1},binary_sensor:{title:"Binary Sensors",showControls:!1,hidden:!1}};class o{static#t;static#e;static#i=[];static#s;static#a=!1;static#r={};static debug=false;constructor(){throw new Error("This class should be invoked with method initialize() instead of using the keyword new!")}static get strategyOptions(){return this.#r}static get areas(){return this.#i}static get devices(){return this.#e}static get entities(){return this.#t}static get debug(){return this.debug}static async initialize(t){this.#s=t.hass.states;try{[this.#t,this.#e,this.#i]=await Promise.all([t.hass.callWS({type:"config/entity_registry/list"}),t.hass.callWS({type:"config/device_registry/list"}),t.hass.callWS({type:"config/area_registry/list"})])}catch(t){console.error(o.debug?t:"An error occurred while querying Home assistant's registries!")}this.#r=structuredClone(t.config.strategy.options||{}),this.debug=this.#r.debug,this.#r.areas=this.#r.areas??{},this.#r.views=this.#r.views??{},this.#r.domains=this.#r.domains??{},this.#r.areas.undisclosed?.hidden||(this.#r.areas.undisclosed={...a,...this.#r.areas.undisclosed},this.#r.areas.undisclosed.area_id=null,this.#i.push(this.#r.areas.undisclosed)),this.#i=o.areas.map((t=>({...t,...this.#r.areas[t.area_id??"undisclosed"]}))),this.#i.sort(((t,e)=>(t.order??1/0)-(e.order??1/0)||t.name.localeCompare(e.name)));for(const t of Object.keys(s))this.#r.views[t]={...s[t],...this.#r.views[t]};this.#r.views=Object.fromEntries(Object.entries(this.#r.views).sort((([,t],[,e])=>(t.order??1/0)-(e.order??1/0)||t.title?.localeCompare(e.title))));for(const t of Object.keys(r))this.#r.domains[t]={...r[t],...this.#r.domains[t]};this.#r.domains=Object.fromEntries(Object.entries(this.#r.domains).sort((([,t],[,e])=>(t.order??1/0)-(e.order??1/0)||t.title?.localeCompare(e.title)))),this.#a=!0}static isInitialized(){return this.#a}static getCountTemplate(t,e,i){const s=[];this.isInitialized()||console.warn("Helper class should be initialized before calling this method!");for(const e of this.#i){const i=this.#e.filter((t=>t.area_id===e.area_id)).map((t=>t.id)),a=this.#t.filter(this.#o,{area:e,domain:t,areaDeviceIds:i}).map((t=>`states['${t.entity_id}']`));s.push(...a)}return`{% set entities = [${s}] %} {{ entities | selectattr('state','${e}','${i}') | list | count }}`}static#o(t){return(this.area.area_id?this.areaDeviceIds.includes(t.device_id)||t.area_id===this.area.area_id:(this.areaDeviceIds.includes(t.device_id)||!t.device_id)&&!t.area_id)&&t.entity_id.startsWith(`${this.domain}.`)&&null==t.hidden_by&&null==t.disabled_by}static getDeviceEntities(t,e){this.isInitialized()||console.warn("Helper class should be initialized before calling this method!");const i=this.#e.filter((e=>e.area_id===t.area_id)).map((t=>t.id));return this.#t.filter(this.#o,{area:t,domain:e,areaDeviceIds:i}).sort(((t,e)=>t.original_name?.localeCompare(e.original_name)))}static getStateEntities(t,e){this.isInitialized()||console.warn("Helper class should be initialized before calling this method!");const i=[],s=Object.fromEntries(this.#t.map((t=>[t.entity_id,t]))),a=Object.fromEntries(this.#e.map((t=>[t.id,t]))),r=Object.values(this.#s).filter((t=>t.entity_id.startsWith(`${e}.`)));for(const e of r){const r=s[e.entity_id],o=a[r?.device_id];(r?.area_id===t.area_id||o&&o.area_id===t.area_id)&&i.push(e)}return i}static sanitizeClassName(t){return(t=t.charAt(0).toUpperCase()+t.slice(1)).replace(/([-_][a-z])/g,(t=>t.toUpperCase().replace("-","").replace("_","")))}static#n(t,e,i){const s=[];for(const a of Object.keys(t))t[a][e]===i&&s.push(a);return s}static getExposedViewIds(){return this.isInitialized()||console.warn("Helper class should be initialized before calling this method!"),this.#n(this.#r.views,"hidden",!1)}static getExposedDomainIds(){return this.isInitialized()||console.warn("Helper class should be initialized before calling this method!"),this.#n(this.#r.domains,"hidden",!1)}}},981:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AbstractCard:()=>a});var s=i(84);class a{entity;options={type:"custom:mushroom-entity-card",icon:"mdi:help-circle",double_tap_action:{action:null}};constructor(t){if(this.constructor===a)throw new Error("Abstract classes can't be instantiated.");if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.entity=t}mergeOptions(t,e){this.options={...this.options,...t,...e};try{this.options.double_tap_action.target.entity_id=this.entity.entity_id}catch{}}getCard(){return{entity:this.entity.entity_id,...this.options}}}},138:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AreaCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-template-card",primary:void 0,icon:"mdi:texture-box",icon_color:"blue",tap_action:{action:"navigate",navigation_path:void 0},hold_action:{action:"none"}};constructor(t,e={}){super(t),this.#c.primary=t.name,this.#c.tap_action.navigation_path=t.area_id??t.name,"default"===e.type&&(e.type=this.#c.type),this.mergeOptions(this.#c,e),!e.primary&&e.name&&(this.options.primary=e.name)}}},917:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BinarySensorCard:()=>a});var s=i(408);class a extends s.SensorCard{#c={type:"custom:mushroom-entity-card",secondary_info:"last-changed",icon_color:"green"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},497:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CameraCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"picture-entity",show_name:!1,show_state:!1,camera_view:"live"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},898:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ClimateCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-climate-card",icon:void 0,hvac_modes:["off","cool","heat","fan_only"],show_temperature_control:!0,collapsible_controls:!0};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},499:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CoverCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-cover-card",icon:void 0,show_buttons_control:!0,layout:"horizontal",show_position_control:!1,show_tilt_position_control:!1};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},297:(t,e,i)=>{"use strict";i.r(e),i.d(e,{FanCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-fan-card",icon:void 0,show_percentage_control:!0,show_oscillate_control:!0,icon_animation:!0};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},194:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AreaCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"area",area:void 0,navigation_path:void 0};constructor(t,e={}){super(t),this.#c.area=t.area_id??t.name,this.#c.navigation_path=t.area_id??t.name,e.type=this.#c.type,this.mergeOptions(this.#c,e)}}},698:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LightCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-light-card",icon:void 0,show_brightness_control:!0,show_color_control:!0,use_light_color:!0,show_color_temp_control:!0,collapsible_controls:!0,layout:"horizontal",double_tap_action:{target:{entity_id:void 0},action:"call-service",service:"light.turn_on",data:{rgb_color:[255,255,255]}}};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},315:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LockCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-lock-card",icon:void 0,layout:"horizontal"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},568:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MediaPlayerCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-media-player-card",icon:void 0,use_media_info:!0,media_controls:["on_off","play_pause_stop"],show_volume_level:!0,volume_controls:["volume_mute","volume_set","volume_buttons"]};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},190:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MiscellaneousCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-entity-card",icon_color:"blue-grey"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},543:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PersonCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-person-card",layout:"vertical",primary_info:"none",secondary_info:"none",icon_type:"entity-picture"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},408:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SensorCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-entity-card",icon:"mdi:information",animate:!0,line_color:"green"};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},177:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SwitchCard:()=>a});var s=i(981);class a extends s.AbstractCard{#c={type:"custom:mushroom-entity-card",icon:void 0,tap_action:{action:"toggle"}};constructor(t,e={}){super(t),this.mergeOptions(this.#c,e)}}},402:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TitleCard:()=>s});class s{#d;#l={title:void 0,subtitle:void 0,showControls:!0,iconOn:"mdi:power-on",iconOff:"mdi:power-off",onService:"none",offService:"none"};constructor(t,e={}){this.#d=t.map((t=>t.area_id)).filter((t=>t)),this.#l={...this.#l,...e}}createCard(){const t=[{type:"custom:mushroom-title-card",title:this.#l.title,subtitle:this.#l.subtitle}];return this.#l.showControls&&t.push({type:"custom:mushroom-chips-card",alignment:"end",card_mod:{style:"\n          ha-card {\n            margin: 18px 0;\n          }\n          "},chips:[{type:"template",icon:this.#l.iconOff,icon_color:"red",tap_action:{action:"call-service",service:this.#l.offService,target:{area_id:this.#d},data:{}}},{type:"template",icon:this.#l.iconOn,icon_color:"amber",tap_action:{action:"call-service",service:this.#l.onService,target:{area_id:this.#d},data:{}}}]}),{type:"horizontal-stack",cards:t}}}},244:()=>{},175:(t,e,i)=>{var s={"./AbstractCard":[981,9],"./AbstractCard.js":[981,9],"./AreaCard":[138,9,179],"./AreaCard.js":[138,9,179],"./BinarySensorCard":[917,9,179],"./BinarySensorCard.js":[917,9,179],"./CameraCard":[497,9,179],"./CameraCard.js":[497,9,179],"./ClimateCard":[898,9,179],"./ClimateCard.js":[898,9,179],"./CoverCard":[499,9,179],"./CoverCard.js":[499,9,179],"./FanCard":[297,9,179],"./FanCard.js":[297,9,179],"./HaAreaCard":[194,9,179],"./HaAreaCard.js":[194,9,179],"./LightCard":[698,9,179],"./LightCard.js":[698,9,179],"./LockCard":[315,9,179],"./LockCard.js":[315,9,179],"./MediaPlayerCard":[568,9,179],"./MediaPlayerCard.js":[568,9,179],"./MiscellaneousCard":[190,9,179],"./MiscellaneousCard.js":[190,9,179],"./PersonCard":[543,9,179],"./PersonCard.js":[543,9,179],"./SensorCard":[408,9],"./SensorCard.js":[408,9],"./SwitchCard":[177,9,179],"./SwitchCard.js":[177,9,179],"./TitleCard":[402,9],"./TitleCard.js":[402,9],"./typedefs":[244,7,179],"./typedefs.js":[244,7,179]};function a(t){if(!i.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],a=e[0];return Promise.all(e.slice(2).map(i.e)).then((()=>i.t(a,16|e[1])))}a.keys=()=>Object.keys(s),a.id=175,t.exports=a},354:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ClimateChip:()=>a});var s=i(84);class a{#d;#l={};constructor(t,e={}){if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.#d=t.filter((t=>t)),this.#l={...this.#l,...e}}getChip(){return{type:"template",icon:"mdi:thermostat",icon_color:"orange",content:s.W.getCountTemplate("climate","ne","off"),tap_action:{action:"navigate",navigation_path:"climates"},hold_action:{action:"navigate",navigation_path:"climates"}}}}},454:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CoverChip:()=>a});var s=i(84);class a{#d;#l={};constructor(t,e={}){if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.#d=t.filter((t=>t)),this.#l={...this.#l,...e}}getChip(){return{type:"template",icon:"mdi:window-open",icon_color:"cyan",content:s.W.getCountTemplate("cover","eq","open"),tap_action:{action:"navigate",navigation_path:"covers"}}}}},955:(t,e,i)=>{"use strict";i.r(e),i.d(e,{FanChip:()=>a});var s=i(84);class a{#d;#l={};constructor(t,e={}){if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.#d=t.filter((t=>t)),this.#l={...this.#l,...e}}getChip(){return{type:"template",icon:"mdi:fan",icon_color:"green",content:s.W.getCountTemplate("fan","eq","on"),tap_action:{action:"call-service",service:"fan.turn_off",target:{area_id:this.#d},data:{}},hold_action:{action:"navigate",navigation_path:"fans"}}}}},980:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LightChip:()=>a});var s=i(84);class a{#d;#l={};constructor(t,e={}){if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.#d=t.filter((t=>t)),this.#l={...this.#l,...e}}getChip(){return{type:"template",icon:"mdi:lightbulb-group",icon_color:"amber",content:s.W.getCountTemplate("light","eq","on"),tap_action:{action:"call-service",service:"light.turn_off",target:{area_id:this.#d},data:{}},hold_action:{action:"navigate",navigation_path:"lights"}}}}},25:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SwitchChip:()=>a});var s=i(84);class a{#d;#l={};constructor(t,e={}){if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.");this.#d=t.filter((t=>t)),this.#l={...this.#l,...e}}getChip(){return{type:"template",icon:"mdi:dip-switch",icon_color:"blue",content:s.W.getCountTemplate("switch","eq","on"),tap_action:{action:"call-service",service:"switch.turn_off",target:{area_id:this.#d},data:{}},hold_action:{action:"navigate",navigation_path:"switches"}}}}},369:(t,e,i)=>{"use strict";i.r(e),i.d(e,{WeatherChip:()=>s});class s{#h;#l={show_temperature:!0,show_conditions:!0};constructor(t,e={}){this.#h=t,this.#l={...this.#l,...e}}getChip(){return{type:"weather",entity:this.#h,...this.#l}}}},837:(t,e,i)=>{var s={"./ClimateChip":[354,179],"./ClimateChip.js":[354,179],"./CoverChip":[454,179],"./CoverChip.js":[454,179],"./FanChip":[955,179],"./FanChip.js":[955,179],"./LightChip":[980,179],"./LightChip.js":[980,179],"./SwitchChip":[25,179],"./SwitchChip.js":[25,179],"./WeatherChip":[369,179],"./WeatherChip.js":[369,179]};function a(t){if(!i.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],a=e[0];return i.e(e[1]).then((()=>i(a)))}a.keys=()=>Object.keys(s),a.id=837,t.exports=a},721:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AbstractView:()=>r});var s=i(84),a=i(402);class r{options={title:null,path:null,icon:"mdi:view-dashboard",subview:!1};viewTitleCard;constructor(){if(this.constructor===r)throw new Error("Abstract classes can't be instantiated.");if(!s.W.isInitialized())throw new Error("The Helper module must be initialized before using this one.")}mergeOptions(t,e){this.options={...t,...e}}async createViewCards(){const t=[];for(const e of s.W.areas){const r=[],o=s.W.getDeviceEntities(e,this.domain),n=s.W.sanitizeClassName(this.domain+"Card"),c=await i(175)(`./${n}`);for(const t of o){let e=s.W.strategyOptions.card_options?.[t.entity_id]??{},i=s.W.strategyOptions.card_options?.[t.device_id]??{};e.hidden||i.hidden||r.push(new c[n](t,e).getCard())}r.length&&(r.unshift(new a.TitleCard([e],{title:e.name,...this.options.titleCard},this.domain).createCard()),t.push({type:"vertical-stack",cards:r}))}return t.unshift(t.length?this.viewTitleCard:{type:"custom:mushroom-title-card",title:"No Entities Available",subtitle:"They're either hidden by the configuration or by Home Assistant."}),t}async getView(){return{...this.options,cards:await this.createViewCards()}}}},458:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CameraView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="camera";#c={title:"Cameras",path:"cameras",icon:"mdi:cctv",subview:!1,titleCard:{showControls:!1}};#u={title:"All Cameras",...this.options.titleCard};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},310:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ClimateView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="climate";#c={title:"Climates",path:"climates",icon:"mdi:thermostat",subview:!1,titleCard:{showControls:!1}};#u={title:"All Climates",subtitle:s.W.getCountTemplate(this.domain,"ne","off")+" climates on",...this.options.titleCard};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},401:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CoverView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="cover";#c={title:"Covers",path:"covers",icon:"mdi:window-open",subview:!1,titleCard:{iconOn:"mdi:arrow-up",iconOff:"mdi:arrow-down",onService:"cover.open_cover",offService:"cover.close_cover"}};#u={title:"All Covers",subtitle:s.W.getCountTemplate(this.domain,"eq","open")+" covers open"};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},902:(t,e,i)=>{"use strict";i.r(e),i.d(e,{FanView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="fan";#c={title:"Fans",path:"fans",icon:"mdi:fan",subview:!1,titleCard:{iconOn:"mdi:fan",iconOff:"mdi:fan-off",onService:"fan.turn_on",offService:"fan.turn_off"}};#u={title:"All Fans",subtitle:s.W.getCountTemplate(this.domain,"eq","on")+" fans on"};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},530:(t,e,i)=>{"use strict";i.r(e),i.d(e,{HomeView:()=>r});var s=i(84),a=i(721);class r extends a.AbstractView{#c={title:"Home",path:"home",subview:!1};constructor(t={}){super(),this.mergeOptions(this.#c,t)}async createViewCards(){return await Promise.all([this.#m(),this.#f(),this.#g()]).then((([t,e,i])=>{const a=s.W.strategyOptions,r=[{type:"custom:mushroom-chips-card",alignment:"center",chips:t},{type:"horizontal-stack",cards:e}];return a.quick_access_cards&&r.push(...a.quick_access_cards),r.push({type:"vertical-stack",cards:i}),a.extra_cards&&r.push(...a.extra_cards),r}))}async#m(){const t=[],e=s.W.strategyOptions.chips,a=["light","fan","cover","switch","climate"],r=s.W.areas.map((t=>t.area_id));let o;const n=e?.weather_entity??s.W.entities.find((t=>t.entity_id.startsWith("weather.")&&null==t.disabled_by&&null==t.hidden_by))?.entity_id;if(n)try{o=await Promise.resolve().then(i.bind(i,369));const e=new o.WeatherChip(n);t.push(e.getChip())}catch(t){console.error(s.W.debug?t:"An error occurred while creating the weather chip!")}for(let n of a)if(e?.[`${n}_count`]??1){const e=s.W.sanitizeClassName(n+"Chip");try{o=await i(837)(`./${e}`);const s=new o[e](r);t.push(s.getChip())}catch(t){console.error(s.W.debug?t:`An error occurred while creating the ${n} chip!`)}}return e?.extra_chips&&t.push(...e.extra_chips),t}#f(){const t=[];return Promise.resolve().then(i.bind(i,543)).then((e=>{for(const i of s.W.entities.filter((t=>t.entity_id.startsWith("person.")&&null==t.hidden_by&&null==t.disabled_by)))t.push(new e.PersonCard(i).getCard())})),t}async#g(){const t=[{type:"custom:mushroom-title-card",title:"Areas"}];let e=[];for(const[a,r]of s.W.areas.entries()){let o,n=s.W.strategyOptions.areas[r.area_id??"undisclosed"]?.type??s.W.strategyOptions.areas._?.type??"default";try{o=await i(175)(`./${n}`)}catch(t){o=await Promise.resolve().then(i.bind(i,138)),s.W.strategyOptions.debug&&"default"!==n&&console.error(t)}let c=s.W.strategyOptions.areas[r.area_id??"undisclosed"],d=s.W.strategyOptions.areas[r.area_id]?.temperature,l=s.W.strategyOptions.areas[r.area_id]?.humidity,h=s.W.strategyOptions.areas[r.area_id]?.illuminance,p=s.W.strategyOptions.areas[r.area_id]?.window,u=s.W.strategyOptions.areas[r.area_id]?.lock,m=s.W.strategyOptions.areas[r.area_id]?.door,f=s.W.strategyOptions.areas[r.area_id]?.motion??s.W.strategyOptions.areas[r.area_id]?.occupancy??s.W.strategyOptions.areas[r.area_id]?.presence,g=(s.W.strategyOptions.areas[r.area_id]?.cover,s.W.strategyOptions.areas[r.area_id]?.light_group),y=[];const _=(t,e,i=null)=>{let a=[];const r=s.W.getDeviceEntities(t,e);if(r.length){const o=s.W.getStateEntities(t,e);for(const t of r){const e=o.find((e=>e.entity_id===t.entity_id));"unavailable"!==e.state&&(i&&!(Array.isArray(i)?i:[i]).includes(e.attributes.device_class)||a.push(e))}}return a},C=(t,e,i={},s={state:"on"})=>{const a={type:"conditional"!==t?t:"entity",content_info:"none",tap_action:{action:"toggle"},double_tap_action:{action:"more-info"},hold_action:{action:"more-info"},entity:e,...i};return"conditional"!==t?a:{type:t,conditions:[{entity:e,...s}],chip:a}};d||(d=_(r,"sensor","temperature")[0]?.entity_id),l||(l=_(r,"sensor","humidity")[0]?.entity_id),h||(h=_(r,"sensor","illuminance")[0]?.entity_id),f||(f=_(r,"binary_sensor",["motion","occupancy","presence"])[0]?.entity_id),u||(u=_(r,"lock")[0]?.entity_id||_(r,"binary_sensor","lock")[0]?.entity_id),p||(p=_(r,"binary_sensor","window")[0]?.entity_id),m||(m=_(r,"binary_sensor","door")[0]?.entity_id);const w=_(r,"sensor").filter((t=>"carbon_dioxide"===t.attributes.device_class)).map((t=>t.entity_id));let v=[];if(d&&v.push(`ðŸŒ¡ï¸{{ states('${d}') | int }}Â°`),w.forEach((t=>{v.push(`â˜ï¸{{ states('${t}') }}`)})),v.length&&(c={secondary:v.join(" "),multiline_secondary:!0,...c}),f&&y.push(C("conditional",f,{icon:"mdi:motion-sensor",tap_action:{action:"more-info"}})),_(r,"media_player").forEach((t=>{y.push(C("conditional",t.entity_id,{},{state:"playing"})),y.push(C("conditional",t.entity_id,{},{state:"on"}))})),_(r,"climate").forEach((t=>{y.push(C("conditional",t.entity_id,{},{state_not:"off"}))})),g){let t={type:"conditional",conditions:[{entity:g,state:"on"}],chip:{type:"template",entity:g,icon:"mdi:lightbulb-group",tap_action:{action:"toggle"},double_tap_action:{action:"more-info"},hold_action:{action:"more-info"}}};y.push(t)}let O=[];if(u&&O.push({entity:u,state:"unlocked",icon:"mdi:lock-open"}),p&&O.push({entity:p,state:"on",icon:"mdi:window-open-variant"}),m&&O.push({entity:m,state:"on",icon:"mdi:door-open"}),O.length){let t=O.map((t=>`is_state('${t.entity}', '${t.state}') %}${t.icon}{%`)).join(" elif ");t=`{% if ${t} endif %}`,c={badge_icon:t,badge_color:"red",...c}}if(!s.W.strategyOptions.areas[r.area_id]?.hidden){let t=new o.AreaCard(r,c).getCard();y.length&&(console.log("wrapping in stack",{cardOptions:c,card:t,chips:y}),t={type:"custom:stack-in-card",mode:"vertical",cards:[{...t,card_mod:{style:"ha-card {\n                    border: none;\n                  }"}},{type:"custom:mushroom-chips-card",chips:y.map((t=>{const e={style:":host {\n                      --chip-height: 25px;\n                      --chip-box-shadow: 0px 1px 4px rgba(0,0,0,0.2);\n                      --chip-border-width: 0px;\n                      --chip-spacing: 2px;\n                    }\n                    "};return"conditional"===t.type?{...t,chip:{...t.chip,card_mod:e}}:{...t,card_mod:e}})),alignment:"start",card_mod:{style:"ha-card {\n                    margin-bottom: 10px;\n                    margin-left: 12px;\n                  }"}}]},console.log("wrapped in stack",{card:t})),e.push(t)}if(a===s.W.areas.length-1)for(let i=0;i<e.length;i+=2)t.push({type:"horizontal-stack",cards:e.slice(i,i+2)})}return t}}},587:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LightView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="light";#c={title:"Lights",path:"lights",icon:"mdi:lightbulb-group",subview:!1,titleCard:{iconOn:"mdi:lightbulb",iconOff:"mdi:lightbulb-off",onService:"light.turn_on",offService:"light.turn_off"}};#u={title:"All Lights",subtitle:s.W.getCountTemplate(this.domain,"eq","on")+" lights on"};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},133:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SwitchView:()=>o});var s=i(84),a=i(402),r=i(721);class o extends r.AbstractView{#p="switch";#c={title:"Switches",path:"switches",icon:"mdi:dip-switch",subview:!1,titleCard:{iconOn:"mdi:power-plug",iconOff:"mdi:power-plug-off",onService:"switch.turn_on",offService:"switch.turn_off"}};#u={title:"All Switches",subtitle:s.W.getCountTemplate(this.domain,"eq","on")+" switches on"};constructor(t={}){super(),this.mergeOptions(this.#c,t),this.viewTitleCard=new a.TitleCard(s.W.areas,{...this.#u,...this.options.titleCard}).createCard()}get domain(){return this.#p}}},654:(t,e,i)=>{"use strict";i.r(e)},968:(t,e,i)=>{var s={"./AbstractView":[721,179],"./AbstractView.js":[721,179],"./CameraView":[458,179],"./CameraView.js":[458,179],"./ClimateView":[310,179],"./ClimateView.js":[310,179],"./CoverView":[401,179],"./CoverView.js":[401,179],"./FanView":[902,179],"./FanView.js":[902,179],"./HomeView":[530,179],"./HomeView.js":[530,179],"./LightView":[587,179],"./LightView.js":[587,179],"./SwitchView":[133,179],"./SwitchView.js":[133,179],"./typedefs":[654,179],"./typedefs.js":[654,179]};function a(t){if(!i.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],a=e[0];return i.e(e[1]).then((()=>i(a)))}a.keys=()=>Object.keys(s),a.id=968,t.exports=a}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var r=s[t]={exports:{}};return i[t](r,r.exports,a),r.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"==typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"==typeof i.then)return i}var r=Object.create(null);a.r(r);var o={};t=t||[null,e({}),e([]),e(e)];for(var n=2&s&&i;"object"==typeof n&&!~t.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,a.d(r,o),r},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.e=()=>Promise.resolve(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=a(84),e=a(408),i=a(402);customElements.define("ll-strategy-mushroom-strategy",class{static async generateDashboard(e){await t.W.initialize(e);const i=[];let s;for(let e of t.W.getExposedViewIds())try{const r=t.W.sanitizeClassName(e+"View");s=await a(968)(`./${r}`);const o=await new s[r](t.W.strategyOptions.views[e]).getView();i.push(o)}catch(i){console.error(t.W.debug?i:`View '${e}' couldn't be loaded!`)}for(let e of t.W.areas)e.hidden||i.push({title:e.name,path:e.area_id??e.name,subview:!0,strategy:{type:"custom:mushroom-strategy",options:{area:e}}});return t.W.strategyOptions.extra_views&&i.push(...t.W.strategyOptions.extra_views),{views:i}}static async generateView(s){const r=t.W.getExposedDomainIds(),o=s.view.strategy.options.area,n=[...o.extra_cards??[]];for(const s of r){if("default"===s)continue;const r=t.W.sanitizeClassName(s+"Card");let c=[];try{c=await a(175)(`./${r}`).then((a=>{let n=[];const c=t.W.getDeviceEntities(o,s);if(c.length){const d=new i.TitleCard([o],t.W.strategyOptions.domains[s]).createCard();if("sensor"===s){const i=t.W.getStateEntities(o,"sensor"),s=[];for(const a of c){const r=i.find((t=>t.entity_id===a.entity_id));let o=t.W.strategyOptions.card_options?.[a.entity_id]??{},n=t.W.strategyOptions.card_options?.[a.device_id]??{};o.hidden||n.hidden||(r?.attributes.unit_of_measurement&&(o={type:"custom:mini-graph-card",entities:[a.entity_id],...o}),s.push(new e.SensorCard(a,o).getCard()))}return s.length&&(n.push({type:"vertical-stack",cards:s}),n.unshift(d)),n}for(const e of c){let i=t.W.strategyOptions.card_options?.[e.entity_id]??{},s=t.W.strategyOptions.card_options?.[e.device_id]??{};i.hidden||s.hidden||n.push(new a[r](e,i).getCard())}if("binary_sensor"===s){const t=[];for(let e=0;e<n.length;e+=2)t.push({type:"horizontal-stack",cards:n.slice(e,e+2)});n=t}n.length&&n.unshift(d)}return n}))}catch(e){console.error(t.W.debug?e:"An error occurred while creating the domain cards!")}c.length&&n.push({type:"vertical-stack",cards:c})}if(!t.W.strategyOptions.domains.default.hidden){const e=t.W.devices.filter((t=>t.area_id===o.area_id)).map((t=>t.id)),s=t.W.entities.filter((t=>(e.includes(t.device_id)||t.area_id===o.area_id)&&null==t.hidden_by&&null==t.disabled_by&&!r.includes(t.entity_id.split(".",1)[0])));if(s.length){let e=[];try{e=await Promise.resolve().then(a.bind(a,190)).then((e=>{const a=[new i.TitleCard([o],t.W.strategyOptions.domains.default).createCard()];for(const i of s){let s=t.W.strategyOptions.card_options?.[i.entity_id]??{},r=t.W.strategyOptions.card_options?.[i.device_id]??{};s.hidden||r.hidden||a.push(new e.MiscellaneousCard(i,s).getCard())}return a}))}catch(e){console.error(t.W.debug?e:"An error occurred while creating the domain cards!")}n.push({type:"vertical-stack",cards:e})}}return{cards:n}}})})()})();